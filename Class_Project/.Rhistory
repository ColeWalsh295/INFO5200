library(tidyverse)
# This loads 3 datasets: cl=clickstream, a=assessment grades; m=module states.
load("edx_lms_feb25.rda")
# Exploring Clickstreams
# add code here
head(cl)
str(cl)
summary(cl)
# Exploring Module States
# add code here
head(m)
# Exploring Assessment grades
# add code here
head(a)
###############################################
###### BEGIN INPUT: Explore each dataset ######
###############################################
# Exploring Clickstreams
# add code here
head(cl)
# Exploring Module States
# add code here
head(m)
# Exploring Assessment grades
# add code here
head(a)
###############################################
###############################################
ma = m %>% left_join(
a %>% select(hash_id:possible_graded, first_attempted_timestamp),
by = c("hash_id"="hash_id", "module_id"="usage_key")
)
table(ma$module_type, ma$first_attempted_timestamp>0)
boxplot(ma$first_attempted_timestamp ~ ma$module_id)
ma %>%
filter(possible_graded > 0) %>%
group_by(module_id) %>%
summarise(
deadline = quantile(first_attempted_timestamp, probs = .9, na.rm=T),
p_unsubmitted = mean(is.na(first_attempted_timestamp))
) %>%
arrange(deadline)
# add code
head(ma)
ma %>%
filter(possible_graded > 0) %>%
group_by(module_id) %>%
summarise(
deadline = quantile(first_attempted_timestamp, probs = .9, na.rm=T),
p_unsubmitted = mean(is.na(first_attempted_timestamp))
) %>%
arrange(deadline) %>%
filter(p_unsubmitted < 1)
dat_deadkine <- ma %>%
filter(possible_graded > 0) %>%
group_by(module_id) %>%
summarise(
deadline = quantile(first_attempted_timestamp, probs = .9, na.rm=T),
p_unsubmitted = mean(is.na(first_attempted_timestamp))
) %>%
arrange(deadline) %>%
filter(p_unsubmitted < 1)
dat_deadline <- ma %>%
filter(possible_graded > 0) %>%
group_by(module_id) %>%
summarise(
deadline = quantile(first_attempted_timestamp, probs = .9, na.rm=T),
p_unsubmitted = mean(is.na(first_attempted_timestamp))
) %>%
arrange(deadline) %>%
filter(p_unsubmitted < 1)
###############################################
####### BEGIN INPUT: Define outcome ###########
###############################################
# add code
head(ma)
head(dat_deadline)
###############################################
###############################################
left_join(ma, dat_deadline)
left_join(ma, dat_deadline, by = 'module_id')
inner_join(ma, dat_deadline, by = 'module_id')
inner_join(ma, dat_deadline, by = 'module_id') %>%
mutate(unsubmitted = (first_attempted_timestamp > deadline) | is.na(first_attempted_timestamp))
inner_join(ma, dat_deadline, by = 'module_id') %>%
mutate(unsubmitted = 1*((first_attempted_timestamp > deadline) | is.na(first_attempted_timestamp)))
dat_deadline
# add code here
dat_deadline
secs_day = 60 * 60 * 24
example_deadline = 1550655231
example_features = cl %>%
filter(timestamp < example_deadline - secs_day) %>%
group_by(hash_id) %>%
summarise(
num_events = n(),
num_seq_goto = sum(event_type=="seq_goto")
)
head(example_features)
